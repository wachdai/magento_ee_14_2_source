<?xml version="1.0"?>
<!--
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition End User License Agreement
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magento.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    Enterprise
 * @package     Enterprise_Catalog
 * @copyright Copyright (c) 2006-2015 X.commerce, Inc. (http://www.magento.com)
 * @license http://www.magento.com/license/enterprise-edition
 */
-->
<config>
    <modules>
        <Enterprise_Catalog>
            <version>1.13.0.9</version>
        </Enterprise_Catalog>
    </modules>
    <global>
        <models>
            <enterprise_catalog>
                <class>Enterprise_Catalog_Model</class>
                <resourceModel>enterprise_catalog_resource</resourceModel>
            </enterprise_catalog>
            <enterprise_catalog_resource>
                <class>Enterprise_Catalog_Model_Resource</class>
                <entities>
                    <product>
                        <table>enterprise_catalog_product_rewrite</table>
                    </product>
                    <category>
                        <table>enterprise_catalog_category_rewrite</table>
                    </category>
                </entities>
            </enterprise_catalog_resource>
        </models>
        <blocks>
            <enterprise_catalog>
                <class>Enterprise_Catalog_Block</class>
            </enterprise_catalog>
        </blocks>
        <helpers>
            <enterprise_catalog>
                <class>Enterprise_Catalog_Helper</class>
            </enterprise_catalog>
        </helpers>
        <index>
            <indexer>
                <catalog_category_flat>
                    <model>enterprise_catalog/index_dummy_category</model>
                    <action_model>
                        <changelog>enterprise_catalog/index_action_category_flat_refresh_changelog</changelog>
                        <all>enterprise_catalog/index_action_category_flat_refresh</all>
                    </action_model>
                    <index_table>catalog_category_flat</index_table>
                    <sort_order>10</sort_order>
                </catalog_category_flat>
                <catalog_product_flat>
                    <model>enterprise_catalog/index_dummy_product</model>
                    <action_model>
                        <changelog>enterprise_catalog/index_action_product_flat_refresh_changelog</changelog>
                        <all>enterprise_catalog/index_action_product_flat_refresh</all>
                    </action_model>
                    <index_table>catalog_product_flat</index_table>
                    <sort_order>20</sort_order>
                </catalog_product_flat>
                <catalog_product_price>
                    <model>enterprise_catalog/index_dummy_price</model>
                    <action_model>
                        <changelog>enterprise_catalog/index_action_product_price_refresh_changelog</changelog>
                        <all>enterprise_catalog/index_action_product_price_refresh</all>
                    </action_model>
                    <index_table>catalog_product_index_price</index_table>
                    <sort_order>40</sort_order>
                </catalog_product_price>
                <catalog_url_category>
                    <model>enterprise_catalog/index_dummy_url_category</model>
                    <action_model>
                        <changelog>enterprise_catalog/index_action_url_rewrite_category_refresh_changelog</changelog>
                        <all>enterprise_catalog/index_action_url_rewrite_category_refresh</all>
                    </action_model>
                    <index_table>enterprise_url_rewrite_category</index_table>
                    <sort_order>50</sort_order>
                </catalog_url_category>
                <catalog_url_product>
                    <model>enterprise_catalog/index_dummy_url_product</model>
                    <action_model>
                        <changelog>enterprise_catalog/index_action_url_rewrite_product_refresh_changelog</changelog>
                        <all>enterprise_catalog/index_action_url_rewrite_product_refresh</all>
                    </action_model>
                    <index_table>enterprise_url_rewrite_product</index_table>
                    <sort_order>60</sort_order>
                </catalog_url_product>
                <catalog_category_product>
                    <model>enterprise_catalog/index_dummy_category_product</model>
                    <action_model>
                        <changelog>enterprise_catalog/index_action_catalog_category_product_refresh_changelog</changelog>
                        <all>enterprise_catalog/index_action_catalog_category_product_refresh</all>
                    </action_model>
                    <index_table>catalog_category_product_index</index_table>
                    <sort_order>80</sort_order>
                </catalog_category_product>
                <catalog_category_product_cat>
                    <model>enterprise_catalog/index_dummy_category_product</model>
                    <action_model>
                        <changelog>enterprise_catalog/index_action_catalog_category_product_category_refresh_changelog</changelog>
                        <all>enterprise_catalog/index_action_catalog_category_product_category_refresh</all>
                    </action_model>
                    <index_table>catalog_category_product_cat</index_table>
                    <visibility>0</visibility>
                    <sort_order>90</sort_order>
                </catalog_category_product_cat>
                <catalog_url>
                    <model>enterprise_index/indexer_dummy</model>
                    <visibility>0</visibility>
                </catalog_url>
            </indexer>
        </index>
        <catalog>
            <category>
                <url>
                    <model>enterprise_catalog/category_url</model>
                </url>
                <url_rewrite>
                    <helper>enterprise_catalog/category_urlRewrite</helper>
                </url_rewrite>
            </category>
            <product>
                <url>
                    <model>enterprise_catalog/product_url</model>
                </url>
                <url_rewrite>
                    <helper>enterprise_catalog/product_urlRewrite</helper>
                </url_rewrite>
                <flat>
                    <flag>
                        <model>enterprise_catalog/product_flat_flag</model>
                    </flag>
                </flat>
            </product>
        </catalog>
        <events>
            <catalog_category_save_after>
                <observers>
                    <catalog_category_save_custom_redirect>
                        <class>enterprise_catalog/observer</class>
                        <method>saveCategoryCustomRedirect</method>
                    </catalog_category_save_custom_redirect>
                </observers>
            </catalog_category_save_after>
            <catalog_category_delete_before>
                <observers>
                    <catalog_category_delete_custom_redirect>
                        <class>enterprise_catalog/observer</class>
                        <method>deleteCategoryCustomRedirects</method>
                    </catalog_category_delete_custom_redirect>
                </observers>
            </catalog_category_delete_before>
            <catalog_category_delete_after>
                <observers>
                    <delete_orphan_redirects>
                        <class>enterprise_catalog/observer</class>
                        <method>deleteOrphanRedirects</method>
                    </delete_orphan_redirects>
                </observers>
            </catalog_category_delete_after>
            <catalog_product_delete_before>
                <observers>
                    <catalog_product_delete_custom_redirect>
                        <class>enterprise_catalog/observer</class>
                        <method>deleteProductCustomRedirects</method>
                    </catalog_product_delete_custom_redirect>
                </observers>
            </catalog_product_delete_before>>
            <catalog_product_delete_after>
                <observers>
                    <delete_orphan_redirects>
                        <class>enterprise_catalog/observer</class>
                        <method>deleteOrphanRedirects</method>
                    </delete_orphan_redirects>
                </observers>
            </catalog_product_delete_after>
            <catalog_product_save_after>
                <observers>
                    <catalog_product_save_custom_redirect>
                        <class>enterprise_catalog/observer</class>
                        <method>saveProductCustomRedirect</method>
                    </catalog_product_save_custom_redirect>
                </observers>
            </catalog_product_save_after>
            <adminhtml_catalog_category_edit_prepare_form>
                <observers>
                    <catalog_product_form_renderer_attribute_urlkey>
                        <class>enterprise_catalog/observer</class>
                        <method>setFormRendererAttributeUrlkey</method>
                    </catalog_product_form_renderer_attribute_urlkey>
                </observers>
            </adminhtml_catalog_category_edit_prepare_form>
            <adminhtml_catalog_product_edit_prepare_form>
                <observers>
                    <catalog_product_form_renderer_attribute_urlkey>
                        <class>enterprise_catalog/observer</class>
                        <method>setFormRendererAttributeUrlkey</method>
                    </catalog_product_form_renderer_attribute_urlkey>
                </observers>
            </adminhtml_catalog_product_edit_prepare_form>
            <catalog_category_save_commit_after>
                <observers>
                    <catalog_category_refresh_url_rewrite>
                        <class>enterprise_catalog/index_observer</class>
                        <method>refreshCategoryUrlRewrite</method>
                    </catalog_category_refresh_url_rewrite>
                    <enterprise_category_flat>
                        <class>enterprise_catalog/index_observer_flat</class>
                        <method>processCategorySaveEvent</method>
                    </enterprise_category_flat>
                    <enterprise_catalog_category_product>
                        <class>enterprise_catalog/index_observer_category_product</class>
                        <method>processCategorySaveEvent</method>
                    </enterprise_catalog_category_product>
                </observers>
            </catalog_category_save_commit_after>
            <catalog_product_website_update>
                <observers>
                    <enterprise_catalog_category_product_website>
                        <class>enterprise_catalog/index_observer_category_product</class>
                        <method>processUpdateWebsiteForProduct</method>
                    </enterprise_catalog_category_product_website>
                </observers>
            </catalog_product_website_update>
            <catalog_product_save_commit_after>
                <observers>
                    <catalog_product_refresh_url_rewrite>
                        <class>enterprise_catalog/index_observer</class>
                        <method>refreshProductUrlRewrite</method>
                    </catalog_product_refresh_url_rewrite>
                    <enterprise_product_flat>
                        <class>enterprise_catalog/index_observer_flat</class>
                        <method>processProductSaveEvent</method>
                    </enterprise_product_flat>
                    <enterprise_catalog_category_product>
                        <class>enterprise_catalog/index_observer_category_product</class>
                        <method>processProductSaveEvent</method>
                    </enterprise_catalog_category_product>
                </observers>
            </catalog_product_save_commit_after>
            <cataloginventory_stock_item_save_commit_after>
                <observers>
                    <enterprise_product_price>
                        <class>enterprise_catalog/index_observer_price</class>
                        <method>processStockItemSaveEvent</method>
                    </enterprise_product_price>
                </observers>
            </cataloginventory_stock_item_save_commit_after>
            <catalogrule_after_apply>
                <observers>
                    <enterprise_product_price>
                        <class>enterprise_catalog/index_observer_price</class>
                        <method>processCatalogPriceRulesApplyEvent</method>
                    </enterprise_product_price>
                </observers>
            </catalogrule_after_apply>
            <catalog_category_delete_commit_after>
                <observers>
                    <cleanup_category_url_rewrite>
                        <class>enterprise_catalog/index_observer</class>
                        <method>deleteCategoryUrlRewrite</method>
                    </cleanup_category_url_rewrite>
                </observers>
            </catalog_category_delete_commit_after>
            <catalog_product_delete_commit_after>
                <observers>
                    <cleanup_product_url_rewrite>
                        <class>enterprise_catalog/index_observer</class>
                        <method>deleteProductUrlRewrite</method>
                    </cleanup_product_url_rewrite>
                </observers>
                <observers>
                    <enterprise_product_price>
                        <class>enterprise_catalog/index_observer_price</class>
                        <method>processProductSaveEvent</method>
                    </enterprise_product_price>
                </observers>
            </catalog_product_delete_commit_after>
            <category_move>
                <observers>
                    <enterprise_catalog_category_product>
                        <class>enterprise_catalog/index_observer_category_product</class>
                        <method>processCategorySaveEvent</method>
                    </enterprise_catalog_category_product>
                    <enterprise_category_flat>
                        <class>enterprise_catalog/index_observer_flat</class>
                        <method>processCategoryMoveEvent</method>
                    </enterprise_category_flat>
                    <catalog_category_refresh_url_rewrite>
                        <class>enterprise_catalog/index_observer</class>
                        <method>refreshCategoryUrlRewrite</method>
                    </catalog_category_refresh_url_rewrite>
                    <catalog_category_save_custom_redirect>
                        <class>enterprise_catalog/observer</class>
                        <method>saveCategoryCustomRedirect</method>
                    </catalog_category_save_custom_redirect>
                </observers>
            </category_move>
            <catalog_category_product_shell_reindex_after>
                <observers>
                    <enterprise_catalog>
                        <class>enterprise_catalog/index_observer_category_product</class>
                        <method>processShellCategoryProductReindexEvent</method>
                    </enterprise_catalog>
                </observers>
            </catalog_category_product_shell_reindex_after>
            <catalog_product_flat_shell_reindex_after>
                <observers>
                    <enterprise_catalog>
                        <class>enterprise_catalog/index_observer_flat</class>
                        <method>processShellProductReindexEvent</method>
                    </enterprise_catalog>
                </observers>
            </catalog_product_flat_shell_reindex_after>
            <catalog_category_flat_shell_reindex_after>
                <observers>
                    <enterprise_catalog>
                        <class>enterprise_catalog/index_observer_flat</class>
                        <method>processShellCategoryReindexEvent</method>
                    </enterprise_catalog>
                </observers>
            </catalog_category_flat_shell_reindex_after>
            <catalog_product_price_shell_reindex_after>
                <observers>
                    <enterprise_catalog>
                        <class>enterprise_catalog/index_observer_price</class>
                        <method>processShellProductReindexEvent</method>
                    </enterprise_catalog>
                </observers>
            </catalog_product_price_shell_reindex_after>
            <catalog_url_category_shell_reindex_after>
                <observers>
                    <reindex_url_redirect>
                        <class>enterprise_catalog/index_observer_url</class>
                        <method>processShellUrlCategoryReindexEvent</method>
                    </reindex_url_redirect>
                </observers>
            </catalog_url_category_shell_reindex_after>
            <catalog_url_product_shell_reindex_after>
                <observers>
                    <reindex_url_redirect>
                        <class>enterprise_catalog/index_observer_url</class>
                        <method>processShellUrlProductReindexEvent</method>
                    </reindex_url_redirect>
                </observers>
            </catalog_url_product_shell_reindex_after>
            <product_duplicate_attributes>
                <observers>
                    <remove_url_key>
                        <class>enterprise_catalog/observer</class>
                        <method>removeUrlKey</method>
                    </remove_url_key>
                </observers>
            </product_duplicate_attributes>
        </events>
        <redirect_type_block>
            <category>Enterprise_Catalog_Block_Adminhtml_Redirect_Edit</category>
            <product>Enterprise_Catalog_Block_Adminhtml_Redirect_Edit</product>
        </redirect_type_block>
        <resources>
            <enterprise_catalog_setup>
                <setup>
                    <module>Enterprise_Catalog</module>
                    <class>Mage_Catalog_Model_Resource_Setup</class>
                </setup>
            </enterprise_catalog_setup>
        </resources>
    </global>
    <adminhtml>
        <layout>
            <updates>
                <enterprise_catalog>
                    <file>enterprise/catalog.xml</file>
                </enterprise_catalog>
            </updates>
        </layout>
        <translate>
            <modules>
                <Enterprise_Catalog>
                    <files>
                        <default>Enterprise_Catalog.csv</default>
                    </files>
                </Enterprise_Catalog>
            </modules>
        </translate>
        <messages>
            <website_chnaged_indexers translate="label" module="catalog">
                <label><![CDATA[Please refresh "Product Attributes" in System -&gt; <a href="%s">Index Management</a>]]></label>
            </website_chnaged_indexers>
        </messages>
        <events>
            <controller_action_postdispatch_adminhtml_catalog_product_action_attribute_save>
                <observers>
                    <enterprise_product_flat>
                        <class>enterprise_catalog/index_observer_flat</class>
                        <method>processMassUpdateAction</method>
                    </enterprise_product_flat>
                </observers>
            </controller_action_postdispatch_adminhtml_catalog_product_action_attribute_save>
            <catalog_controller_product_mass_status>
                <observers>
                    <enterprise_product_flat>
                        <class>enterprise_catalog/index_observer_flat</class>
                        <method>processMassStatusUpdate</method>
                    </enterprise_product_flat>
                </observers>
            </catalog_controller_product_mass_status>
            <sitemap_categories_generating_before>
                <observers>
                    <set_category_url_suffix>
                        <class>enterprise_catalog/observer</class>
                        <method>addSeoSuffixToCategoryUrl</method>
                    </set_category_url_suffix>
                </observers>
            </sitemap_categories_generating_before>
            <sitemap_products_generating_before>
                <observers>
                    <set_product_url_suffix>
                        <class>enterprise_catalog/observer</class>
                        <method>addSeoSuffixToProductUrl</method>
                    </set_product_url_suffix>
                </observers>
            </sitemap_products_generating_before>
        </events>
    </adminhtml>
    <frontend>
        <translate>
            <modules>
                <Enterprise_Catalog>
                    <files>
                        <default>Enterprise_Catalog.csv</default>
                    </files>
                </Enterprise_Catalog>
            </modules>
        </translate>
    </frontend>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <Enterprise_Catalog before="Mage_Adminhtml">Enterprise_Catalog_Adminhtml</Enterprise_Catalog>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
    <default>
        <catalog>
            <seo>
                <product_url_suffix>html</product_url_suffix>
                <category_url_suffix>html</category_url_suffix>
            </seo>
        </catalog>
        <redirect_type translate="category product" module="enterprise_catalog">
            <category>Category</category>
            <product>Product</product>
        </redirect_type>
        <index_management>
            <index_options>
                <category_product>1</category_product>
                <category_url_rewrite>1</category_url_rewrite>
                <product_url_rewrite>1</product_url_rewrite>
                <product_flat>1</product_flat>
                <category_flat>1</category_flat>
            </index_options>
        </index_management>
        <rewrite_matchers>
            <category translate="title" module="enterprise_catalog">
                <title>Category</title>
                <model>enterprise_catalog/urlrewrite_matcher_category</model>
                <priority>20</priority>
            </category>
            <product translate="title" module="enterprise_catalog">
                <title>Product</title>
                <model>enterprise_catalog/urlrewrite_matcher_product</model>
                <priority>30</priority>
            </product>
        </rewrite_matchers>
    </default>
    <crontab>
        <jobs>
            <enterprise_catalog_index_refresh_price>
                <schedule>
                    <cron_expr>0 * * * *</cron_expr>
                </schedule>
                <run>
                    <model>enterprise_catalog/index_observer_price::refreshSpecialPrices</model>
                </run>
            </enterprise_catalog_index_refresh_price>
        </jobs>
        <events>
            <sitemap_categories_generating_before>
                <observers>
                    <set_category_url_suffix>
                        <class>enterprise_catalog/observer</class>
                        <method>addSeoSuffixToCategoryUrl</method>
                    </set_category_url_suffix>
                </observers>
            </sitemap_categories_generating_before>
            <sitemap_products_generating_before>
                <observers>
                    <set_product_url_suffix>
                        <class>enterprise_catalog/observer</class>
                        <method>addSeoSuffixToProductUrl</method>
                    </set_product_url_suffix>
                </observers>
            </sitemap_products_generating_before>
        </events>
    </crontab>
</config>
